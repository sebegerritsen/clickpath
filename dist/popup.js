(()=>{"use strict";class t{constructor(){this.tourList=document.getElementById("tourList"),this.statusMessage=document.getElementById("statusMessage"),this.init()}async init(){this.loadTours()}async loadTours(){try{const[t]=await chrome.tabs.query({active:!0,currentWindow:!0});if(!t?.id)return void this.showStatus("No active tab found","error");if(!t.url?.includes("corporater"))return void this.showStatus("Navigate to a Corporater page to use tours","info");const s=await chrome.tabs.sendMessage(t.id,{type:"GET_TOURS"});s?.success&&s.data?.length>0?this.renderTours(s.data):this.showStatus("No tours available for this page","info")}catch(t){console.error("[ClickPath] Failed to load tours:",t),this.showStatus("Could not connect to page. Try refreshing.","error")}}renderTours(t){this.tourList.innerHTML="",t.forEach(t=>{const s=document.createElement("div");s.className="tour-item",s.innerHTML=`\n        <div class="tour-info">\n          <div class="tour-name">${t.name}</div>\n          ${t.description?`<div class="tour-description">${t.description}</div>`:""}\n        </div>\n        <button class="start-btn" data-tour-id="${t.id}">Start</button>\n      `,s.querySelector(".start-btn")?.addEventListener("click",()=>{this.startTour(t.id)}),this.tourList.appendChild(s)})}async startTour(t){try{const[s]=await chrome.tabs.query({active:!0,currentWindow:!0});s?.id&&(await chrome.tabs.sendMessage(s.id,{type:"START_TOUR",tourId:t}),window.close())}catch(t){console.error("[ClickPath] Failed to start tour:",t),this.showStatus("Failed to start tour","error")}}showStatus(t,s){this.statusMessage.textContent=t,this.statusMessage.className=`status-message ${s}`,this.statusMessage.style.display="block"}}document.addEventListener("DOMContentLoaded",()=>{new t})})();
//# sourceMappingURL=popup.js.map