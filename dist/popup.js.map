{"version":3,"file":"popup.js","mappings":"mBAWA,MAAMA,EAIJ,WAAAC,GACEC,KAAKC,SAAWC,SAASC,eAAe,YACxCH,KAAKI,cAAgBF,SAASC,eAAe,iBAC7CH,KAAKK,MACP,CAEQ,UAAMA,GACZL,KAAKM,WACP,CAEQ,eAAMA,GACZ,IAEE,MAAOC,SAAaC,OAAOC,KAAKC,MAAM,CAAEC,QAAQ,EAAMC,eAAe,IAErE,IAAKL,GAAKM,GAER,YADAb,KAAKc,WAAW,sBAAuB,SAKzC,IAAKP,EAAIQ,KAAKC,SAAS,cAErB,YADAhB,KAAKc,WAAW,6CAA8C,QAKhE,MAAMG,QAAiBT,OAAOC,KAAKS,YAAYX,EAAIM,GAAI,CAAEM,KAAM,cAE3DF,GAAUG,SAAWH,EAASI,MAAMC,OAAS,EAC/CtB,KAAKuB,YAAYN,EAASI,MAE1BrB,KAAKc,WAAW,mCAAoC,OAExD,CAAE,MAAOU,GACPC,QAAQD,MAAM,oCAAqCA,GACnDxB,KAAKc,WAAW,6CAA8C,QAChE,CACF,CAEQ,WAAAS,CAAYG,GAClB1B,KAAKC,SAAS0B,UAAY,GAE1BD,EAAME,QAAQC,IACZ,MAAMC,EAAO5B,SAAS6B,cAAc,OACpCD,EAAKE,UAAY,YACjBF,EAAKH,UAAY,uEAEYE,EAAKI,yBAC5BJ,EAAKK,YAAc,iCAAiCL,EAAKK,oBAAsB,uEAEzCL,EAAKhB,6BAGjDiB,EAAKK,cAAc,eAAeC,iBAAiB,QAAS,KAC1DpC,KAAKqC,UAAUR,EAAKhB,MAGtBb,KAAKC,SAASqC,YAAYR,IAE9B,CAEQ,eAAMO,CAAUE,GACtB,IACE,MAAOhC,SAAaC,OAAOC,KAAKC,MAAM,CAAEC,QAAQ,EAAMC,eAAe,IAEjEL,GAAKM,WACDL,OAAOC,KAAKS,YAAYX,EAAIM,GAAI,CAAEM,KAAM,aAAcoB,WAC5DC,OAAOC,QAEX,CAAE,MAAOjB,GACPC,QAAQD,MAAM,oCAAqCA,GACnDxB,KAAKc,WAAW,uBAAwB,QAC1C,CACF,CAEQ,UAAAA,CAAW4B,EAAiBvB,GAClCnB,KAAKI,cAAcuC,YAAcD,EACjC1C,KAAKI,cAAc4B,UAAY,kBAAkBb,IACjDnB,KAAKI,cAAcwC,MAAMC,QAAU,OACrC,EAIF3C,SAASkC,iBAAiB,mBAAoB,KAC5C,IAAItC,G","sources":["webpack://clickpath/./src/popup/popup.ts"],"sourcesContent":["/**\n * ClickPath Popup Script\n * Tour selection and management UI\n */\n\ninterface TourInfo {\n  id: string;\n  name: string;\n  description?: string;\n}\n\nclass ClickPathPopup {\n  private tourList: HTMLElement;\n  private statusMessage: HTMLElement;\n\n  constructor() {\n    this.tourList = document.getElementById('tourList')!;\n    this.statusMessage = document.getElementById('statusMessage')!;\n    this.init();\n  }\n\n  private async init() {\n    this.loadTours();\n  }\n\n  private async loadTours() {\n    try {\n      // Get current tab\n      const [tab] = await chrome.tabs.query({ active: true, currentWindow: true });\n\n      if (!tab?.id) {\n        this.showStatus('No active tab found', 'error');\n        return;\n      }\n\n      // Check if we're on a Corporater page\n      if (!tab.url?.includes('corporater')) {\n        this.showStatus('Navigate to a Corporater page to use tours', 'info');\n        return;\n      }\n\n      // Request tours from content script\n      const response = await chrome.tabs.sendMessage(tab.id, { type: 'GET_TOURS' });\n\n      if (response?.success && response.data?.length > 0) {\n        this.renderTours(response.data);\n      } else {\n        this.showStatus('No tours available for this page', 'info');\n      }\n    } catch (error) {\n      console.error('[ClickPath] Failed to load tours:', error);\n      this.showStatus('Could not connect to page. Try refreshing.', 'error');\n    }\n  }\n\n  private renderTours(tours: TourInfo[]) {\n    this.tourList.innerHTML = '';\n\n    tours.forEach(tour => {\n      const item = document.createElement('div');\n      item.className = 'tour-item';\n      item.innerHTML = `\n        <div class=\"tour-info\">\n          <div class=\"tour-name\">${tour.name}</div>\n          ${tour.description ? `<div class=\"tour-description\">${tour.description}</div>` : ''}\n        </div>\n        <button class=\"start-btn\" data-tour-id=\"${tour.id}\">Start</button>\n      `;\n\n      item.querySelector('.start-btn')?.addEventListener('click', () => {\n        this.startTour(tour.id);\n      });\n\n      this.tourList.appendChild(item);\n    });\n  }\n\n  private async startTour(tourId: string) {\n    try {\n      const [tab] = await chrome.tabs.query({ active: true, currentWindow: true });\n\n      if (tab?.id) {\n        await chrome.tabs.sendMessage(tab.id, { type: 'START_TOUR', tourId });\n        window.close(); // Close popup after starting tour\n      }\n    } catch (error) {\n      console.error('[ClickPath] Failed to start tour:', error);\n      this.showStatus('Failed to start tour', 'error');\n    }\n  }\n\n  private showStatus(message: string, type: 'info' | 'error') {\n    this.statusMessage.textContent = message;\n    this.statusMessage.className = `status-message ${type}`;\n    this.statusMessage.style.display = 'block';\n  }\n}\n\n// Initialize popup\ndocument.addEventListener('DOMContentLoaded', () => {\n  new ClickPathPopup();\n});\n"],"names":["ClickPathPopup","constructor","this","tourList","document","getElementById","statusMessage","init","loadTours","tab","chrome","tabs","query","active","currentWindow","id","showStatus","url","includes","response","sendMessage","type","success","data","length","renderTours","error","console","tours","innerHTML","forEach","tour","item","createElement","className","name","description","querySelector","addEventListener","startTour","appendChild","tourId","window","close","message","textContent","style","display"],"ignoreList":[],"sourceRoot":""}